#include<mega16.h>
#include<delay.h>
int p=0;
void main()
{
 PORTC=0b00000000;
 DDRC=0b00000111;
 PORTD=0b00001111;
 DDRD=0b00000000;
 while(1)
 { 
  //counter++
  while(PIND.0==0)
  {
   delay_ms(400);
   p=p+1;
  }
  //counter-- 
  while(PIND.1==0)
  {
   delay_ms(400);
   while(p>0)
   {
    p=p-1;
   }
  }
  //start  
  while(PIND.2==0)
  {
   while(p>0)
   {
    p=p-1;
    PORTC.0=1;
    PORTC.1=0;
    PORTC.2=1;
    delay_ms(200);
    PORTC.2=0;
    delay_ms(200);
    if(PIND.2==0)
    {
     break;
    } 
    delay_ms(600);
    if(PIND.2==0)
    {
     break; //stop
    }
   }
  }
  PORTC.0=0;
  PORTC.1=0;
  PORTC.2=0;
 }      
}